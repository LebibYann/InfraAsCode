apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: github-runners
  namespace: github-runners
spec:
  replicas: 1
  template:
    spec:
      repository: your-org/your-repo  # Format: owner/repo (not full URL)
      
      labels:
        - self-hosted
        - kubernetes
        - gke
        - linux
        - x64
        - dev
      
      # Node selector to force on the dedicated node pool
      nodeSelector:
        workload-type: github-runners
      
      # Tolerations for the taints
      tolerations:
        - key: workload-type
          operator: Equal
          value: github-runners
          effect: NoSchedule
      
      # Resources
      resources:
        limits:
          cpu: "2000m"
          memory: "2Gi"
        requests:
          cpu: "500m"
          memory: "512Mi"
      
      # Docker-in-Docker with sidecar
      # Note: dockerdWithinRunnerContainer only works if the image has docker preinstalled
      # We use dockerEnabled to have a DinD sidecar
      dockerEnabled: true
      
      # Ephemeral runners (more secure)
      ephemeral: true
      
      # Service account
      serviceAccountName: github-runner
